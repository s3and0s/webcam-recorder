{"version":3,"sources":["utils/qs.js","components/Webcam/Webcam.js","components/CameraList/CameraList.js","components/NameField/NameField.js","components/Tester/InProcessScreen.js","components/Tester/Tester.js","components/Table/TableHeader.js","components/Table/TableRow.js","components/Table/TableData.js","components/Table/PageNum.js","components/Table/PageInput.js","components/Table/TableFooter.js","components/Table/Table.js","components/Table/DataCollection.js","components/Modal.js","components/Status.js","components/Toggle/Toggle.js","components/CompleteAnimation/Checkmark/Checkmark.js","components/CompleteAnimation/Fireworks/Fireworks.js","components/CompleteAnimation/CompleteAnimation.js","components/ProgressBar.js","app/App.js","index.js","assets/svg/collapse-chevron.svg","assets/svg/expand-chevron.svg","assets/svg/beg.svg","assets/svg/end.svg","assets/data/sentences.txt","assets/data/sentences-pinyin-accent-nospecialchar.txt","utils/ip.js","assets/svg/up-chevron.svg","assets/svg/down-chevron.svg"],"names":["qs","id","parsedUrl","URL","window","location","href","searchParams","has","get","Webcam","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","isRecording","recorder","videoSrc","videoEle","startTime","video","React","createRef","today","Date","getFullYear","getMonth","getDate","getTime","react_default","a","createElement","className","onClick","startRecording","controls","autoPlay","playsInline","muted","ref","props","videoRef","name","Component","CameraList","_useState","useState","_useState2","slicedToArray","availableCams","setAvailableCams","_useState3","_useState4","recordingStatus","setRecordingStatus","_useState5","_useState6","availableMics","setAvailableMics","_useState7","_useState8","pluggedInDevices","setPluggedInDevices","helper_extractRelevantCamInfo","device","camera_info","deviceId","label","groupId","initCams","navigator","mediaDevices","enumerateDevices","then","devices","videoDevices","micDevices","numCams","num","reduce","accumulator","kind","updateDetectedNumCams","helper_getNumCams","console","log","map","toLowerCase","includes","indexOf","push","helper_addToMicDevices","videodevices","devicePrior","filter","cam","mic_info","helper_addToVideoDevices","document","getElementById","click","disabled","catch","err","message","Array","prototype","diff","i","isMac","startFaceTimeCam","faceTimeDevice","defaultMic","cogoToast","success","position","hideAfter","hide","addNewCamMic","resolve","undefined","Promise","checkIfMac","Exception","allDevices","detectedTwoDevices","idAoni","newPluggedInID","length","warn","_getNewMicCam","newCam","newMic","error","getNewMicCam","_getNewMicCam2","newMicID","newCamDevice","temp","substring","initCamsDummy","stopAllCams","startAllCams","getUserMedia","audio","exact","frameRate","ideal","width","height","camera","RecordRTC","recorderType","MediaStreamRecorder","type","desiredSampRate","numberOfAudioChannels","disableLogs","getState","current","srcObject","NotYetLoadedException","triggerRecordStatusUpdate","dummy","stopRecording","blob","getBlob","socket","emit","sentence_index","camera_id","updateConnectionStatus","resumeAllCams","_unused","resumeRecording","useEffect","addCamState","on","addCam","comp_camsList","components_Webcam_Webcam","key","debug","debugControls","style","marginBottom","renderCams","NameField","saveName","value","url_state","history","pushState","updateTesterContents","updateGreenLightStatus","isNameEmpty","replace","detectEnter","e","innerText","which","startBtn","buttons","placeholder","onKeyPress","autoFocus","required","InProcessScreen","recording","setRecordState","done_recording","setDoneRecording","reset_state","reset","nameSet","setName","updateSentence","data","getRecordState","curr_sentence_index","showFileSavingLoader","stopTimer","updateRecordProgress","record","startTimer","displaySentenceToBeRead","debugMode","recordedYet","recordedProgress","disableNextButtonIfCurrNotRead","emoji","sentence","msg","makeEmojiLayout","recordedClassName","recordTimeEle","recordTimeMsg","transition","color","recordGreenLight","numFilesSaved","requiredNumCams","connectedToServer","text","data_length","detectedNumCams","NameField_NameField_NameField","getContents","Tester","intervalID","setIntervalID","clearInterval","innerHTML","time","setInterval","hour","min","sec","slice","createInterval","comp_totalProgress","comp_saveProgress","curr_sentence","hidden","TableHeader","TableRow","getClassOfRowItem","read","index","TableData","updateDataOnPageChange","_this2","page","curr_page","max_per_page","beg","end","rowItems","TableRow_TableRow","PageNum","selected","updatePage","PageInput","handleChange","event","Number","target","handleSubmit","preventDefault","onSubmit","htmlFor","onChange","TableFooter","page_num","mid_point","Math","floor","max_page","total_data","toFixed","nums_list","from","x","PageNum_PageNum","PageInput_PageInput","src","alt","prev","next","Table","TableHeader_TableHeader","TableData_TableData","sentencesPerPageInTable","TableFooter_TableFooter","DataCollection","Table_Table_Table","Modal","_useModali","useModali","animated","title","dist_default","Button","buttonCancel","isStyleCancel","toggleCompleteModal","buttonConfirm","isStyleDestructive","confirmFunc","toast","info","_useModali2","completeModal","onLoadFunc","getElementsByClassName","modalID","Status","Infinity","remainingWords","setRemainingWords","startTimeTotalSecs","getSeconds","diffSecs","hours","mins","totalRecordingTime","displayTime","tick","showTime","initTime","SomeError","date","getHours","getMinutes","Toggle","toggle","addEventListener","onChangeFunc","checked","updateDebugMode","Checkmark","version","xmlns","xlink","y","viewBox","enableBackground","xmlSpace","fill","stroke","strokeMiterlimit","d","strokeWidth","cx","cy","r","strokeLinecap","points","strokeDasharray","Fireworks","CompleteAnimation","Fireworks_Fireworks","Checkmark_Checkmark","ProgressBar","percent","curr","total","alignmentStyle","align","margin","strokeColor","shape","es","trailWidth","trailColor","App","curr_index","ip_address","showNoCamsRef","hideServerOfflineRef","Desktop","_ref","children","useMediaQuery","minWidth","Tablet","_ref2","isTablet","maxWidth","Mobile","_ref3","Default","_ref4","terminal","handler_hoverMouseOutDebug","handler_hoverMouseOverDebug","classList","remove","handler_hoverMouseOutBottom","handler_hoverMouseOverBottom","override","numFilesSavedInd","Fragment","main_userView","comp_debug","comp_tester","comp_bottomAdmin","recordProgress","isMobile","marginTop","top","left","helper_toggleHideBottom","down_chevron","comp_dataCollection","comp_cameraList","main_adminView","textAlign","main_playground","comp_debugHover","comp_completeAnimation","CompleteAnimation_CompleteAnimation","DataCollection_DataCollection","updateName","currSentence","currSentenceIndex","currPageInTable","components_Tester_Tester","first_sentence","numFilesSavedTotal","totalTime","updateTotalTime","disp_showFileSavingLoader","computerID","computerStatus","toggleCamState","helper_toggleCamState","admin_resetCams","comp_status","totalWords","helper_checkIfMobileView","comp_modals","buttonConfirmId","admin_resetProgress","getStatus","setState","helper_toggleModal","handler_debugToggle","readOnly","ip","handler_IPOnChange","handler_useThisCompAsServer","helper_toggleHideDebug","up_chevron","disp_showFileSavedMessage","updateFilesSaved","numFiles","successMessage","ip_util","clientGetIP","split","loading","helper_setServerIP","debugCogoToastOnRef","debugCogoToastOffRef","showDebugOn","showDebugOff","handler_fileSaveSuccess","style_makeEmojiToastLayout","updateCompID","status","style_addThisCpuIcon","str","find","re","RegExp","ref_hideLoader","NotOnPageError","disp_showServerConencted","add","initSocketListeners","helper_showServerNotOnline","JSON","stringify","progress","connectedOrder","connectedOrderMap","update","$merge","refreshRates","conectedOrderNum","setTimeout","reload","max","new_page","bool","admin_refreshAll","origin","helper_emitInitialSocketMessages","helper_showNoCamsConnected","disconnect","io","helper_addHoverEventListeners","debugHoverArea","bottomHoverArea","helper_removeHoverEventListeners","removeEventListener","handler_keydown","inputServerIP","activeElement","react_router_dom","Helmet","react_router","path","component","fontSize","pinyin","readTextFile","sentences","handler_keyup","file","stateName","_this3","fetch","response","sum","serverID","opts","hostname","mode","ok","_context","t0","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","return","ReactDOM","render","src_app_App","module","exports","__webpack_require__","p","ifaces","require","networkInterfaces","nodeGetIP","address","keys","forEach","ifname","iface","family","internal","onNewIP","pc","RTCPeerConnection","mozRTCPeerConnection","webkitRTCPeerConnection","iceServers","noop","localIPs","ipRegex","ipIterate","createDataChannel","createOffer","sdp","line","match","setLocalDescription","onicecandidate","ice","candidate"],"mappings":"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","file":"static/js/main.740a1afd.chunk.js","sourcesContent":["// let qs = (function (a) {\n//   console.log(\"in qs:\" + window.location.href)\n//   if (a === \"\") return {};\n//   var b = {};\n//   for (var i = 0; i < a.length; ++i) {\n//     var p = a[i].split('=', 2);\n//     if (p.length === 1)\n//       b[p[0]] = \"\";\n//     else\n//       b[p[0]] = decodeURIComponent(p[1].replace(/\\+/g, \" \"));\n//   }\n//   return b;\n// })(window.location.search.substr(1).split('&'));\n\nconst qs = function(id) {\n  let parsedUrl = new URL(window.location.href);\n  if (parsedUrl.searchParams.has(id)) {\n    return parsedUrl.searchParams.get(id);\n  } else {\n    return false;\n  }\n}\nexport default qs;","import React from 'react';\nimport './Webcam.scss';\nimport PropTypes from 'prop-types';\n\nclass Webcam extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      isRecording: false,\n      recorder: null,\n      videoSrc: null,\n      videoEle: null,\n      startTime: 'time',\n    };\n    this.video = React.createRef();\n  }\n  getCurrentTime() {\n    let today = new Date();\n    let date =\n      today.getFullYear() +\n      '-' +\n      (today.getMonth() + 1) +\n      '-' +\n      today.getDate();\n    let time = today.getTime(); //today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\n    return date + '-' + time;\n  }\n  \n  render() {\n    // console.log(this.props.videoRef);\n    return (\n      <div className='vid_card' onClick={this.startRecording}>\n        <video\n          className='cam'\n          controls\n          autoPlay\n          playsInline\n          muted\n          ref={this.props.videoRef}\n        />\n        <p className='cam_label'>{this.props.name}</p>\n      </div>\n    );\n  }\n}\n\nWebcam.propTypes = {\n  name: PropTypes.string.isRequired,\n  videoRef: PropTypes.object.isRequired\n};\n\nexport default Webcam;\n","/* eslint-disable no-console */\nimport React, { useState, useEffect } from 'react';\n// import sample_cam from '../../assets/svg/sample-cam.svg';\nimport Webcam from '../Webcam/Webcam.js';\nimport RecordRTC, { MediaStreamRecorder } from 'recordrtc';\nimport qs from '../../utils/qs'\nimport cogoToast from 'cogo-toast';\n// import PropTypes from 'prop-types';\n\nexport default function CameraList(props) {\n  const [availableCams, setAvailableCams] = useState([]);\n  const [recordingStatus, setRecordingStatus] = useState(\"recording-status-loading...\");\n  const [availableMics, setAvailableMics] = useState([]);\n  const [pluggedInDevices, setPluggedInDevices] = useState([]);\n\n  const helper_extractRelevantCamInfo = device => {\n    return {\n      camera_info: {\n        id: device.deviceId,\n        label: device.label,\n        groupId: device.groupId\n      },\n      ref: React.createRef(),\n      recorder: null\n    };\n  }\n  const helper_addToVideoDevices = (device, videodevices) => {\n    device = helper_extractRelevantCamInfo(device);\n    console.log(availableCams);\n    const devicePrior = availableCams.filter(cam => {\n      return cam.camera_info.id === device.camera_info.id\n    })[0];\n    console.log(devicePrior);\n    if (devicePrior) {\n      console.log('found prior device');\n      device.mic_info = devicePrior.mic_info;\n    } else {\n      console.log('using first cam mic!!!')\n      device.mic_info = availableMics[0];\n    }\n    videodevices.push(device);\n  }\n  const helper_addToMicDevices = (device, micDevices) => {\n    if (micDevices.indexOf(device.deviceId) < 0)\n      micDevices.push(device);\n  }\n  const helper_getNumCams = devices => {\n    const num = devices.reduce((accumulator, device) => {\n      return device.kind === 'videoinput' ? accumulator + 1 : accumulator;\n    }, 0);\n    props.updateDetectedNumCams(num);\n    return num;\n  }\n\n  const initCams = () => {\n    if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {\n      console.log('enumerateDevices() not supported.');\n    } else {\n      navigator.mediaDevices.enumerateDevices().then(devices => {\n        let videoDevices = [];\n        let micDevices = [];\n        const numCams = helper_getNumCams(devices);\n\n        console.log(\"number of cams detected: \" + numCams);\n        devices.map(function(device) {\n          if (device.kind === 'audioinput') {\n            if (\n              !device.label.toLowerCase().includes('default') &&\n              !device.label.toLowerCase().includes('communications') && \n              !device.label.toLowerCase().includes('built-in')\n            ) {\n              helper_addToMicDevices(device, micDevices);\n            }\n          }            \n          if (device.kind === 'videoinput') {\n            helper_addToVideoDevices(device, videoDevices);\n          }\n          return null;\n        });\n        setAvailableMics(micDevices);\n        setAvailableCams(videoDevices);\n\n        document.getElementById('startBtn').click();\n        document.getElementById('startBtn').disabled = true;\n        // console.log('getAvailableDevices success!');\n      })\n      .catch(function(err) {\n        console.log(err.name + ': ' + err.message);\n      });\n    }\n  }\n  // const initMics = () => {\n  //   let id = 0;\n  //   availableCams.map(cam => {\n  //     if (availableMics[id]) cam.mic_info = availableMics[id++].deviceId;\n  //   });\n  // }\n\n  Array.prototype.diff = function(a) {\n    return this.filter(function(i) {\n      return a.indexOf(i) < 0;\n    });\n  };\n\n  const getNewMicCam = (newPluggedInID, allDevices) => {\n    const newCam = allDevices.filter(device => {\n      return (\n        newPluggedInID.indexOf(device.deviceId) >= 0 &&\n        device.kind === 'videoinput'\n      );\n    });\n    // should only contain one \n    const newMic = allDevices.filter(device => {\n      return (\n        newPluggedInID.indexOf(device.deviceId) >= 0 &&\n        device.kind === 'audioinput'\n      ); \n    });\n    if (newMic.length > 1) {\n      console.error('multiple new mics detected')\n    }\n    if (newCam.length > 1) {\n      console.error('multiple new cams detected');\n    }\n    const newMicID = newMic[0].deviceId;\n\n    return [newMicID, newCam[0]];\n  }\n\n  const checkIfMac = (resolve) => {\n    let faceTimeDevice = undefined;\n    let defaultMic = undefined;\n    return new Promise(() => {\n      navigator.mediaDevices.enumerateDevices().then(devices => {\n        faceTimeDevice = devices.filter(device => {\n          return device.label.toLowerCase().includes('facetime');\n        });\n        defaultMic = devices.filter(device => {\n          return device.deviceId === 'default'\n        });\n      }).then(()=> {\n        resolve(faceTimeDevice[0], defaultMic[0]);\n      });\n    })\n  }\n\n  let isMac = false;\n\n  const startFaceTimeCam = (faceTimeDevice, defaultMic) => {\n    if (faceTimeDevice) {\n      const device = helper_extractRelevantCamInfo(faceTimeDevice)\n      device.mic_info = defaultMic.deviceId;\n      setAvailableCams([device]);\n      document.getElementById('startBtn').disabled = false;\n      document.getElementById('startBtn').click();\n      document.getElementById('dummyBtn').disabled = false;\n      document.getElementById('dummyBtn').click();\n      cogoToast.success('Mac FaceTime Camera started', {\n        position: 'top-left',\n        hideAfter: 1,\n        onClick: hide => {\n          hide()\n        }\n      });\n      props.updateDetectedNumCams(1);\n      isMac = true;\n    }\n  }\n\n\n  const addNewCamMic = () => {\n    // let isMac = false;\n    try {\n      checkIfMac(startFaceTimeCam);\n    } catch (Exception) {\n      // console.err('not a mac')\n    }\n    navigator.mediaDevices.enumerateDevices().then(devices => {\n      const allDevices = devices.filter(device => {\n        return (\n          device.label.toLowerCase().includes('aoni') &&\n          !device.label.toLowerCase().includes('communication') &&\n          !device.label.toLowerCase().includes('default')\n        );\n      });\n      let detectedTwoDevices = false;\n\n      const idAoni = allDevices.map(device => {\n        return device.deviceId;\n      });\n      // const newPluggedInPaired = allDevices.map(device => [device.kind, device.deviceId])\n      // console.log(newPluggedInPaired);\n\n      const newPluggedInID = idAoni.diff(pluggedInDevices);\n      if (newPluggedInID.length === 0) {\n        // console.log('no new devices detected');\n        if (!isMac) \n          cogoToast.warn('No additional webcams detected.', {hideAfter: 1});\n      } else if (newPluggedInID.length === 2) {\n        detectedTwoDevices = true;\n        // console.log(\n        //   'new devices: ' + newPluggedInID.map(d => d.substring(0, 5))\n        // );\n      }\n\n      if (detectedTwoDevices) {\n        let [newMicID, newCamDevice] = getNewMicCam(newPluggedInID, allDevices);\n        newCamDevice = helper_extractRelevantCamInfo(newCamDevice);\n        const existCamera = availableCams.filter(cam => {\n          return cam.camera_info.id === newCamDevice.camera_info.id;\n        })[0];\n        if (!existCamera) {\n          newCamDevice.mic_info = newMicID;\n          let temp = availableCams;\n          temp.push(newCamDevice);\n          setAvailableCams(temp);\n          // cogoToast.success(\n          //   'New webcam: ' + newCamDevice.camera_info.id.substring(0, 5) + ' added.'\n          // ), {\n          //   hideAfter: 0.5,\n          //   position: 'top-left',\n          //   onClick: hide => {\n          //     hide();\n          //   }\n          // };\n          cogoToast.success('Webcam: ' + newCamDevice.camera_info.id.substring(0, 5) + ' added.', {\n            hideAfter: 1,\n            position: 'top-left',\n            onClick: hide => hide()\n          });\n          document.getElementById('startBtn').disabled = false;\n          initCams();\n          setPluggedInDevices(idAoni);\n        }\n      }      \n    }).then(() => {\n        document.getElementById('dummyBtn').disabled = false;\n        document.getElementById('dummyBtn').click();\n    });\n  }\n\n  function useAvailableWebCams() {\n    //  runs once\n    useEffect(() => {\n      props.updateConnectionStatus();\n    }, [props.addCamState]);\n  }\n\n  const initCamsDummy = () => {\n    stopAllCams(true);\n  }\n\n  const startAllCams = () => {\n    const temp =\n    recordingStatus === 'recording-status-loading...' ? {} : recordingStatus;\n    // goes through all cams array and through each ID, accesses and opens it using navigator\n    availableCams.map(cam => {\n      // console.log(cam.mic_info);\n      if (!cam.mic_info) {\n        console.error('using default microphone...');\n      }\n      navigator.mediaDevices\n        .getUserMedia({\n          audio: {\n            deviceId: {exact: (cam.mic_info) ? cam.mic_info : 'default'}\n          },\n          video: {\n            frameRate: {exact: 30, ideal: 30},\n            width: {ideal: 1920},\n            height: {ideal: 1080},\n            deviceId: cam['camera_info'].id\n          }\n        })\n        .then(camera => {\n          // console.log(camera.getTracks().forEach(track=> {console.log(\"track:\" + track.label + \",\" + track.kind)}));\n          // console.log(\"////////////////////////\");\n          let recorder = RecordRTC(camera, {\n            recorderType: MediaStreamRecorder, //WebAssemblyRecorder,\n            type: 'video',\n            frameRate: 30,\n            desiredSampRate: 16000,\n            width: 1920,\n            height: 1080,\n            numberOfAudioChannels: 2,\n            disableLogs: true\n          });\n          if (recorder.getState() !== 'recording') {\n            recorder.camera = camera;\n            cam['recorder'] = recorder;\n            let video = cam['ref'];\n            try {\n              video.current.srcObject = camera;\n            } catch (NotYetLoadedException) {\n              //\n            }\n            // resetInitialCams(recorder);\n            recorder.startRecording();\n          }\n          triggerRecordStatusUpdate(temp, recorder, cam);\n        })\n        .catch(error => {\n          console.error(error);\n        });\n        return availableCams;\n    });\n  };\n\n  const stopAllCams = (dummy) => {\n    const temp =\n      recordingStatus === 'recording-status-loading...' ? {} : recordingStatus;\n      \n    availableCams.map(cam => {\n      let recorder = cam['recorder'];\n      if (recorder !== null) {\n        recorder.stopRecording(() => {\n          let blob = recorder.getBlob();\n          console.log(\n            '%c recorded data',\n            'background: #222; color: #bada55',\n            blob\n          );\n          if (dummy !== true) {\n            props.socket.emit('client: save data', {\n              name: qs(\"name\"),\n              sentence_index: qs(\"sentence_index\"),\n              camera_id: cam['camera_info'].id,\n              blob: blob\n            });\n          } else {\n            console.log('dummy received, did not save blob');\n          }\n\n        });\n        triggerRecordStatusUpdate(temp, recorder, cam);\n      }\n      return availableCams;\n    });\n  };\n\n  const triggerRecordStatusUpdate = (temp, recorder, cam) => {\n    try {\n      temp[cam['camera_info'].id.substring(0, 15)] = recorder.getState();\n      setRecordingStatus(temp);\n      props.updateConnectionStatus(temp);\n    } catch (NotYetLoadedException) {\n      cogoToast.warn('Camera not yet loaded!', {\n        hideAfter: 0,\n        onClick: hide => {\n          hide()\n        }\n      });\n    }\n  }\n\n  const resumeAllCams = () => {\n    const temp =\n      recordingStatus === 'recording-status-loading...' ? {} : recordingStatus;\n    availableCams.map(cam => {\n      let recorder = cam['recorder'];\n      let state = undefined;\n      try {\n        state = recorder.getState();\n      } catch {\n        cogoToast.warn(\"Camera not yet loaded!\", {\n          hideAfter: 0,\n          onClick: hide => {\n            hide()\n          }\n        });\n      }\n      if (state === \"paused\") {\n        recorder.resumeRecording();\n      } else if (state === \"stopped\"){\n        try {\n          recorder.startRecording();\n        } catch (NotYetLoadedException) {\n          cogoToast.warn('Camera not yet loaded!', {\n            hideAfter: 0,\n            onClick: hide => {\n              hide()\n            }\n          });\n        }\n      }\n      triggerRecordStatusUpdate(temp, recorder, cam);\n      return availableCams;\n    });\n  }\n\n  useAvailableWebCams();\n\n  // dummy to fix bug of first video\n  props.socket.on('server: dummy vid, do not save', function() {\n    document.getElementById('dummyBtn').click();\n    document.getElementById('dummyBtn').disabled = true;\n  });\n\n  // this is actually what calls start cams\n  props.socket.on('server: start cams', function () {\n    document.getElementById(\"resumeBtn\").click();\n    document.getElementById(\"resumeBtn\").disabled = true;\n    document.getElementById('stopBtn').disabled = false;\n\n  });\n\n  // this is actually what calls stop cams\n  props.socket.on('server: stop cams', function () {\n    document.getElementById('stopBtn').click();\n    document.getElementById('stopBtn').disabled = true;\n    document.getElementById(\"resumeBtn\").disabled = false;\n  });\n\n  const debugControls = (debug) => {\n    if (debug) {\n      return (\n        <div>\n          {/* <p>Don't click these while actual testing</p> */}\n          <button id='dummyBtn' className=\"hidden_button\" onClick={initCamsDummy}>\n            dummy reset\n          </button>\n          <button id='startBtn' className=\"hidden_button\" onClick={startAllCams}>\n            start and pause all cams\n          </button>\n          <button id='resumeBtn' className=\"hidden_button\" onClick={resumeAllCams}>\n            resume all cams\n          </button>\n          <button id='stopBtn' className=\"hidden_button\" onClick={stopAllCams}>\n            stop all cams\n          </button>\n          <button\n            id='addCamBtn'\n            className='hidden_button'\n            onClick={addNewCamMic} \n          >\n            Add Cam\n          </button>\n          {/* <button id=\"setCompID\" onClick={getSetCompID}>get set computer ID</button> */}\n        </div>\n      );\n    }\n  }\n\n  const renderCams = addCam => {\n\n    // initMics()\n    const debug = true;\n    let i = 0; \n    const comp_camsList = availableCams.map(cam => {\n      return (\n        <Webcam\n          key={i++}\n          name={'ID: ' + cam['camera_info'].id.substring(0, 15)}\n          videoRef={cam['ref']}\n        />\n      );\n    });\n      \n\n    return (\n      <div id='camera_list'>\n        {debugControls(debug)}\n        <div>\n          <button className='debug_button' style={{marginBottom: '1em'}} onClick={addCam}>Add Webcam</button>\n          <div className='cameras'>{comp_camsList}</div>\n        </div>\n      </div>\n    );\n  };\n  \n  return renderCams(props.addCam);\n}","import React, { Component } from 'react'\nimport './NameField.scss'\nimport PropTypes from 'prop-types';\n\nexport default class NameField extends Component {\n  saveName = () => {\n    let name = document.getElementById(\"name\").value;\n    // document.location.search = \"name=\" + name + \"&sentence_index=0\";\n    let url_state = '?name=' + name + '&sentence_index=0'\n    window.history.pushState(\n      null,\n      null,\n      url_state\n    );\n    \n    this.props.socket.emit('client: start testing', {\n      name,\n      sentence_index: 0\n    })\n    this.props.socket.emit('client: dummy vid, do not save');\n    this.props.socket.emit('client: update recording progress', 0);\n    this.props.socket.emit('client: save total time', [0,0,0]);\n    this.props.socket.emit('client: save total start time', new Date())\n    this.props.updateTesterContents();\n    this.props.updateGreenLightStatus(true);\n    \n  }\n\n  isNameEmpty = () => {\n    try {\n      return !document.getElementById(\"name\").value.replace(/\\s/g, '').length\n    }\n    catch (NotYetLoadedException) {\n      //\n    }\n  }\n\n  detectEnter = (e) => {\n    if (!this.isNameEmpty()) {\n      if (e.which === 13) {\n        this.saveName(e);\n      } \n    } else {\n      document.getElementById('nameNotFilled').innerText='请输入名字'\n    }\n  }\n\n  startBtn = (e) => {\n    if (!this.isNameEmpty()) {\n      if (!e.buttons) {\n        this.saveName(document.getElementById(\"name\").value);\n      }\n    } else {\n      document.getElementById('nameNotFilled').innerText = '请输入名字'\n    }\n  }\n\n\n  render() {\n    return (\n      <div>\n        <div className='name_input'>\n          <input\n            type='text'\n            name='name'\n            id='name'\n            placeholder='输入名字（拼音）'\n            onKeyPress={this.detectEnter}\n            autoFocus\n            required\n          />\n          <br/>\n          <button className=\"btn btn-center\" onClick={this.startBtn}>开始实验</button>\n          {(this.isNameEmpty()) && <p className=\"warning_message\" id=\"nameNotFilled\"></p>}\n        </div>\n      </div>\n    );\n  }\n}\n\nNameField.propTypes = {\n  socket: PropTypes.object.isRequired,\n  updateTesterContents: PropTypes.func.isRequired,\n  updateGreenLightStatus: PropTypes.func.isRequired,\n};","/* eslint-disable no-console */\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport NameField from '../NameField/NameField';\nimport qs from '../../utils/qs';\n\nexport default function InProcessScreen(props) {\n  const [recording, setRecordState] = useState(false);\n  const [done_recording, setDoneRecording] = useState(false);\n  const [reset_state, reset] = useState(false);\n  const [nameSet, setName] = useState(qs('name'));\n\n  function updateSentence(data) {\n    reset(true);\n    props.updateSentence(data);\n  }\n\n  function getRecordState() {\n    if (recording) {\n      return 'Done';\n    } else if (done_recording && !reset_state) {\n      return 'Retry';\n    } else {\n      return 'Record';\n    }\n  }\n\n  function stopRecording() {\n    setDoneRecording(true);\n    setRecordState(false);\n    props.socket.emit('client: stop cams', 'in process screen');\n    reset(false);\n    props.showFileSavingLoader();\n    props.updateSentence('$next');\n\n    props.updateGreenLightStatus(false);\n    props.stopTimer();\n    markSentenceAsDone(props.curr_sentence_index);\n  }\n\n  function markSentenceAsDone(curr_sentence_index) {\n    if (curr_sentence_index >= 0 ) props.updateRecordProgress(curr_sentence_index);\n  }\n\n  function startRecording() {\n    props.socket.emit('client: start cams', 'in process screen');\n    setRecordState(true);\n    props.startTimer();\n    document.getElementById('testerRecordBtn').className = 'btn btn-danger';\n\n  }\n\n  function record() {\n    document.getElementById('showSavedFilesBtn').disabled = false;\n    if (recording) {\n      stopRecording();\n    } else {\n      startRecording();\n    }\n  }\n\n  \n  function disableNextButtonIfCurrNotRead() {\n    if (!props.debugMode) {\n      const recordedYet =\n      props.recordedProgress > props.curr_sentence_index;\n      try {\n        if (recordedYet) {\n          document.getElementById('testerNextBtn').disabled = false;\n        } else {\n          document.getElementById('testerNextBtn').disabled = true;\n        }\n      } catch (Exception) {\n        // console.log(Exception);\n      }\n    }\n  }\n\n  function makeEmojiLayout(msg, emoji) {\n    return (\n      <div className='emoji-layout-container'>\n        <div className='emoji-layout-emoji-left'> {emoji}</div>\n        <div>\n          {msg}\n        </div>\n        <div className='emoji-layout-emoji-right'> {emoji}</div>\n      </div>\n    );\n  }\n\n  function displaySentenceToBeRead() {\n    disableNextButtonIfCurrNotRead();\n    const recordedYet = \n      (props.curr_sentence_index > 0) ? \n      props.recordedProgress >= props.curr_sentence_index : \n      false;\n    const emoji = recordedYet ? '↺' : '';\n    let sentence = props.data[props.curr_sentence_index];\n    if (sentence) {\n      // const line1 = sentence.substring(0,10)\n      // const line2 = sentence.substring(10);\n      sentence = makeEmojiLayout(sentence, emoji);\n    }\n    \n    // const sentence = recordedMessage + ' ' + props.data[props.curr_sentence_index] + ' ' + recordedMessage;\n    const recordedClassName = recordedYet ? 'recorded_sentence_highlight sentence_to_be_read' : 'sentence_to_be_read'\n    return (\n      <div>\n        <div className={recordedClassName}>\n          {/* <p style={{fontSize: '16px'}}>[{props.curr_sentence_index}]</p> */}\n          {sentence}\n        </div>\n      </div>\n    );\n  }\n\n  \n\n  function trans(text) {\n    if (text === 'Done') {\n      return '结束录制';\n    } else if (text === 'Retry') {\n      return '开始录制';\n    } else if (text === 'Record') {\n      return '开始录制'\n    } else {\n      return text;\n    }\n  }\n\n  function updateTesterContents() {\n    setName(true);\n  }\n\n  function getContents() {\n    if (!nameSet) {\n      return (\n        <div>\n          <NameField\n            socket={props.socket}\n            updateTesterContents={updateTesterContents}\n            updateGreenLightStatus={props.updateGreenLightStatus}\n          />\n        </div>\n      );\n    } else {\n      try {\n        let recordTimeEle = document.getElementById('record_time_content');\n        let recordTimeMsg = document.getElementById('record_time_msg');\n        let colorRecordTime = (recordTimeEle.innerText === '00:00:00') ? 'gray' : 'red';\n        if (colorRecordTime === 'gray') {\n          recordTimeEle.style.transition = 'all 0.5 ease'\n          recordTimeMsg.style.transition = 'all 0.5 ease'\n          recordTimeEle.style.color = 'black';\n          recordTimeMsg.style.color = 'black';\n        } else {\n          recordTimeEle.style.transition = 'all 0.5 ease'\n          recordTimeMsg.style.transition = 'all 0.5 ease'\n          recordTimeEle.style.color = '#FF1053';\n          recordTimeMsg.style.color = '#FF1053';\n        }\n      } catch (NotYetLoadedException) {\n        //\n      }\n      return (\n        <div>\n          {displaySentenceToBeRead()}\n          <div className='recording_hint'>\n          <pre id='record_time_content'>00:00:00</pre>\n          <pre id='record_time_msg'>录制中</pre>\n            \n          </div>\n          <button\n            id='testerRecordBtn'\n            className={\n              getRecordState() === 'Done'\n                ? 'btn btn-danger'\n                : 'btn btn_highlight_green'\n            }\n            onClick={record}\n            disabled={\n              !props.recordGreenLight ||\n              props.numFilesSaved % props.requiredNumCams !== 0 || \n              !props.connectedToServer\n            }\n          >\n            {trans(getRecordState())}\n          </button>\n          <br />\n          <button\n            className='btn'\n            id='testerPrevBtn'\n            onClick={() => updateSentence('$prev')}\n            disabled={\n              props.curr_sentence_index === 0 ||\n              !props.recordGreenLight ||\n              props.numFilesSaved % props.requiredNumCams !== 0 ||\n              recording\n            }\n          >\n            ⬅上一句\n          </button>\n          <button\n            className='btn'\n            id='testerNextBtn'\n            onClick={() => updateSentence('$next')}\n            disabled={\n              props.curr_sentence_index === props.data_length - 1 ||\n              !props.recordGreenLight ||\n              props.numFilesSaved % props.requiredNumCams !== 0 ||\n              recording\n            }\n          >\n            下一句➡\n          </button>\n          {(props.detectedNumCams === 0) && <p className=\"warning_message\">请加摄像头</p>}\n          {(!props.connectedToServer) && <p className=\"warning_message\">请确认您链接到服务器</p>}\n        </div>\n      );\n    }\n  }\n\n  return (\n    <div className='test_container'>\n      {getContents()}\n    </div>\n  );\n}\n\nInProcessScreen.propTypes = {\n  curr_sentence_index: PropTypes.number.isRequired,\n  curr_sentence: PropTypes.string.isRequired,\n  data_length: PropTypes.number.isRequired,\n  updateSentence: PropTypes.func.isRequired,\n  socket: PropTypes.object.isRequired,\n  data: PropTypes.array.isRequired,\n  updateGreenLightStatus: PropTypes.func.isRequired,\n  recordGreenLight: PropTypes.bool.isRequired,\n  numFilesSaved: PropTypes.number.isRequired,\n  requiredNumCams: PropTypes.number.isRequired,\n  stopTimer: PropTypes.func.isRequired,\n  startTimer: PropTypes.func.isRequired,\n  recordedProgress: PropTypes.number.isRequired,\n  updateRecordProgress: PropTypes.func.isRequired,\n  showFileSavingLoader: PropTypes.func.isRequired,\n  debugMode: PropTypes.bool.isRequired,\n  connectedToServer: PropTypes.bool.isRequired,\n  detectedNumCams: PropTypes.number.isRequired,\n};\n","import React, { useState } from 'react';\nimport './Tester.scss';\nimport PropTypes from 'prop-types';\nimport InProcessScreen from './InProcessScreen.js';\nimport qs from '../../utils/qs'\n// import ProgressBar from '../ProgressBar'\n\nfunction Tester(props) {\n  const [intervalID, setIntervalID] = useState(undefined);\n\n  function comp_inProcessScreen() {\n    return (\n      <InProcessScreen\n        updateSentence={props.updateSentence}\n        curr_sentence_index={props.curr_sentence_index}\n        data_length={props.data_length}\n        socket={props.socket}\n        data={props.data}\n        curr_sentence={props.curr_sentence}\n        recordGreenLight={props.recordGreenLight}\n        updateGreenLightStatus={props.updateGreenLightStatus}\n        numFilesSaved={props.numFilesSaved}\n        requiredNumCams={props.requiredNumCams}\n        stopTimer={stopTimer}\n        startTimer={startTimer}\n        recordedProgress={props.recordedProgress}\n        updateRecordProgress={props.updateRecordProgress}\n        showFileSavingLoader={props.showFileSavingLoader}\n        debugMode={props.debugMode}\n        connectedToServer={props.connectedToServer}\n        detectedNumCams={props.detectedNumCams}\n      />\n    );\n  }\n\n  function stopTimer() {\n    clearInterval(intervalID);\n    document.getElementById('record_time_content').innerHTML = '00:00:00';\n  }\n\n  function startTimer() {\n    setIntervalID(createInterval());\n  }\n\n  function createInterval() {\n    let time = [0, 0, 0];\n    return setInterval(() => {\n      let hour = time[0];\n      let min = time[1];\n      let sec = time[2];\n\n      if (sec < 60) {\n        sec += 1;\n      }\n      if (sec === 60) {\n        min += 1;\n        sec = 0;\n      }\n      if (min === 60) {\n        hour += 1;\n        min = 0;\n      }\n      time = [hour, min, sec];\n      document.getElementById('record_time_content').innerHTML =\n        ('0' + hour).slice(-2) +\n        ':' +\n        ('0' + min).slice(-2) +\n        ':' +\n        ('0' + sec).slice(-2);\n      }, 10);\n  }\n\n  return (\n    <div className='testing_screen'>\n      {props.comp_totalProgress(false, 1.5)}\n      <div></div>\n      {/* <span/> */}\n      {props.comp_saveProgress()}\n      <div className='middle'>\n        <div className='inner'>{comp_inProcessScreen()}</div>\n      </div>\n      <pre\n        hidden={\n          props.recordGreenLight ||\n          props.curr_sentence_index === 0 ||\n          !qs('name')\n        }\n        className='warning_message'\n      >\n        如果等保存时间多余10秒钟，通知老师来从设置机器\n      </pre>\n    </div>\n  );\n}\n\nTester.propTypes = {\n  updateSentence: PropTypes.func.isRequired,\n  curr_sentence_index: PropTypes.number.isRequired,\n  curr_sentence: PropTypes.string.isRequired,\n  data_length: PropTypes.number.isRequired,\n  socket: PropTypes.object.isRequired,\n  data: PropTypes.array.isRequired,\n  recordGreenLight: PropTypes.bool.isRequired,\n  updateGreenLightStatus: PropTypes.func.isRequired,\n  numFilesSaved: PropTypes.number.isRequired,\n  requiredNumCams: PropTypes.number.isRequired,\n  recordedProgress: PropTypes.number.isRequired,\n  updateRecordProgress: PropTypes.func.isRequired,\n  totalTime: PropTypes.array.isRequired,\n  updateTotalTime: PropTypes.func.isRequired,\n  showFileSavingLoader: PropTypes.func.isRequired,\n  debugMode: PropTypes.bool.isRequired,\n  connectedToServer: PropTypes.bool.isRequired,\n  detectedNumCams: PropTypes.number.isRequired,\n  comp_saveProgress: PropTypes.func.isRequired,\n  comp_totalProgress: PropTypes.func.isRequired,\n}\n\nexport default Tester;\n","import React, { Component } from 'react'\n\nexport default class TableHeader extends Component {\n  render() {\n    return (\n      <div>\n        <div className='table_header_footer'>\n          <h3>Sentence</h3>\n          {/* <div>Length</div>\n          <div>Actions</div> */}\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport './TableRow.scss';\n// import Actions from './Actions';\nimport PropTypes from 'prop-types';\n\nexport default class TableRow extends Component {\n  getClassOfRowItem = () => {\n    let read = this.props.read ? 'read row_item' : 'row_item';\n    // let sentence = this.props.sentence;\n    let is_current = this.props.curr_sentence_index === this.props.index ? ' curr_sentence' : '';\n    return read + is_current;\n  }\n\n\n  render() {\n    return (\n      <div>\n        <div className='table_row'>\n          <div className={this.getClassOfRowItem()}>\n            {this.props.index + \": \" + this.props.sentence}\n          </div>\n          {/* <div className='row_item'>00:00 / {this.props.time} </div> */}\n          {/* <Actions /> */}\n        </div>\n      </div>\n    );\n  }\n}\n\nTableRow.propTypes = {\n  sentence: PropTypes.string.isRequired,\n  index: PropTypes.number.isRequired,\n  curr_sentence_index: PropTypes.number.isRequired,\n  time: PropTypes.string.isRequired,\n  read: PropTypes.bool.isRequired,\n};\n","import React, { Component } from 'react';\nimport TableRow from './TableRow.js';\nimport PropTypes from 'prop-types';\nimport './TableData.scss';\n\nexport default class TableData extends Component {\n  updateDataOnPageChange = () => {};\n  render() {\n    let data = this.props.data;\n    let page = this.props.curr_page;\n    let max_per_page = this.props.max_per_page;\n    let beg = page * max_per_page - max_per_page;\n    let end = beg + max_per_page;\n    let small_data = data.slice(beg, end);\n    let rowItems = small_data.map((sentence, i) => (\n      <TableRow\n        curr_sentence_index={this.props.curr_sentence_index}\n        sentence={sentence}\n        time='00:00'\n        read={false}\n        key={sentence+\":\"+i}\n        index={i + beg}\n      />\n    ));\n\n    return <div className='table'>{rowItems}</div>;\n  }\n}\n\nTableData.propTypes = {\n  data: PropTypes.array.isRequired,\n  curr_sentence_index: PropTypes.number.isRequired,\n  curr_page: PropTypes.number.isRequired,\n  max_per_page: PropTypes.number.isRequired,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class PageNum extends Component {\n  render() {\n    return (\n      <div \n        className={this.props.selected ? 'page_num' : 'can_click_num page_num'}\n        onClick={() => this.props.updatePage(this.props.num)}>\n        {this.props.num}\n      </div>\n    );\n  }\n}\n\nPageNum.propTypes = {\n  num: PropTypes.number.isRequired,\n  selected: PropTypes.bool.isRequired,\n  updatePage: PropTypes.func.isRequired\n};\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types';\n\nexport default class PageInput extends Component {\n  handleChange = (event) => {\n    this.props.updatePage(Number(event.target.value));\n  }\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n  }\n  render() {\n    return (\n      <div>\n        <form onSubmit={this.handleSubmit}>\n          <label htmlFor='page'>Page:</label>\n          <input\n            type='text'\n            value={this.props.curr_page}\n            onChange={this.handleChange}\n            className = 'debug_text_input'\n          />\n        </form>\n      </div>\n    );\n  }\n}\n\nPageInput.propTypes = {\n  updatePage: PropTypes.func.isRequired,\n  curr_page: PropTypes.number.isRequired\n}","import React, { Component } from 'react'\nimport './TableFooter.scss'\nimport PageNum from './PageNum.js'\nimport next from '../../assets/svg/collapse-chevron.svg'\nimport prev from '../../assets/svg/expand-chevron.svg';\nimport PropTypes from 'prop-types';\nimport PageInput from './PageInput.js'\nimport beg from '../../assets/svg/beg.svg'\nimport end from '../../assets/svg/end.svg';\n\nexport default class TableFooter extends Component {\n  updatePage=(page_num) => {\n    this.props.updatePage(page_num);\n  }\n\n  render() {\n    let curr_page = this.props.curr_page;\n    let max_per_page = this.props.max_per_page;\n    let mid_point = Math.floor(max_per_page / 2)\n    let max_page = Number(((this.props.total_data + 1) / this.props.max_per_page + 1).toFixed(0));\n    let page_nums = Array.from(new Array(max_per_page), (x, i) => { \n      let min = 0;\n      if (curr_page <= mid_point) {\n        min = i;\n      } else if (curr_page >= max_page - mid_point) {\n        min = i + max_page - max_per_page;\n      } else {\n        min = i + curr_page - mid_point - 1;\n      }\n      return min;\n    });\n    let nums_list = page_nums.map((i) => {\n      i = i + 1;\n      return <PageNum num={i} selected={curr_page === i} key={i} updatePage={this.props.updatePage}/>\n    });\n\n    return (\n      <div>\n        <div className='table_header_footer'>\n          <div className='table_footer'>\n            <div className='left_footer'>\n              <PageInput\n                updatePage={this.props.updatePage}\n                curr_page={this.props.curr_page}\n              />\n            </div>\n            <div className='right_footer'>\n              <img\n                src={beg}\n                alt=''\n                className='small_btn'\n                onClick={() => this.props.updatePage(1)}\n              />\n              <img\n                src={prev}\n                alt=''\n                className='small_btn'\n                onClick={() => this.props.updatePage(curr_page - 1)}\n              />\n              {nums_list}\n              <img\n                src={next}\n                alt=''\n                className='small_btn'\n                onClick={() => this.props.updatePage(curr_page + 1)}\n              />\n              <img\n                src={end}\n                alt=''\n                className='small_btn'\n                onClick={() => this.props.updatePage(max_page)}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nTableFooter.propTypes = {\n  updatePage: PropTypes.func.isRequired,\n  curr_page: PropTypes.number.isRequired,\n  total_data: PropTypes.number.isRequired,\n  max_per_page: PropTypes.number.isRequired\n};","import React, { Component } from 'react'\nimport TableHeader from './TableHeader.js'\nimport './Table.scss'\nimport TableData from './TableData.js'\nimport PropTypes from 'prop-types';\nimport TableFooter from './TableFooter';\nexport default class Table extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <div>\n        <TableHeader />\n        <TableData\n          data={this.props.data}\n          curr_page={this.props.curr_page}\n          max_per_page={this.props.sentencesPerPageInTable}\n          curr_sentence_index={this.props.curr_sentence_index}\n        />\n        <TableFooter\n          total_data={this.props.data.length}\n          updatePage={this.props.updatePage}\n          curr_page={this.props.curr_page}\n          max_per_page={this.props.sentencesPerPageInTable}\n        />\n      </div>\n    );\n  }\n}\n\nTable.propTypes = {\n  curr_sentence_index: PropTypes.number.isRequired,\n  curr_page: PropTypes.number.isRequired,\n  updatePage: PropTypes.func.isRequired,\n  data: PropTypes.array.isRequired,\n  sentencesPerPageInTable: PropTypes.number.isRequired,\n};","import React, { Component } from 'react';\nimport Table from './Table';\nimport PropTypes from 'prop-types';\n\nexport default class DataCollection extends Component {\n\n\n  render() {\n    return (\n      <div>\n        <div className='data_table'>\n          <Table\n            data={this.props.data}\n            curr_sentence_index={\n              this.props.curr_sentence_index\n            }\n            curr_page={this.props.curr_page}\n            updatePage={this.props.updatePage}\n            sentencesPerPageInTable={this.props.sentencesPerPageInTable}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nDataCollection.propTypes = {\n  data: PropTypes.array.isRequired,\n  curr_sentence_index: PropTypes.number.isRequired,\n  socket: PropTypes.object.isRequired,\n  updatePage: PropTypes.func.isRequired,\n  curr_page: PropTypes.number.isRequired,\n  sentencesPerPageInTable: PropTypes.number.isRequired,\n};\n","import React, { useEffect } from 'react'\nimport Modali, { useModali } from 'modali';\nimport PropTypes from 'prop-types';\nimport cogoToast from 'cogo-toast';\n\nexport default function Modal(props) {\n  const [completeModal, toggleCompleteModal] = useModali({\n    animated: true,\n    title: props.title,\n    message: props.message,\n    buttons: [\n      <Modali.Button\n        label={props.buttonCancel ? props.buttonCancel : ''}\n        isStyleCancel\n        className={!props.buttonCancel ? 'display_none' : ''}\n        key={props.buttonCancel}\n        hidden={!props.buttonCancel}\n        onClick={() => toggleCompleteModal()}\n      />,\n      <Modali.Button\n        label={props.buttonConfirm}\n        isStyleDestructive\n        onClick={() => {\n          if (props.confirmFunc) props.confirmFunc();\n          toggleCompleteModal();\n          if (props.toast) cogoToast.info(props.toast, {\n            onClick: hide => {\n              hide()\n            }\n          });\n        }}\n        hidden={!props.buttonConfirm}\n        key={props.buttonConfirm}\n      />\n    ]\n  });\n  useEffect(() => {\n    if (props.onLoadFunc) props.onLoadFunc()\n    try {\n      if (!props.buttonCancel)\n        document.getElementsByClassName(\n          'modali-button-cancel'\n          )[0].className += ' display_none';\n      if (!props.buttonConfirm)\n        document.getElementsByClassName(\n          'modali-button-destructive'\n        )[0].className += ' display_none';\n    } catch (NotYetLoadedException) {\n      // console.log(NotYetLoadedException);\n    }\n  }, [])\n\n  return (\n    <div style={{ height: '0px' }}>\n      <button\n        className=\"hidden_button\"\n        id={props.modalID}\n        onClick={toggleCompleteModal}\n      >\n        toggle modal\n      </button>\n      <Modali.Modal {...completeModal} />\n    </div>\n  );\n}\n\nModal.propTypes = {\n  socket: PropTypes.object,\n  title: PropTypes.string,\n  message: PropTypes.any,\n  buttonCancel: PropTypes.string,\n  buttonConfirm: PropTypes.string,\n  toast: PropTypes.string,\n  confirmFunc: PropTypes.func,\n  modalID: PropTypes.string,\n  onLoadFunc: PropTypes.func,\n  buttonConfirmId: PropTypes.string\n};\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nexport default function Status(props) {\n  const [remainingWords, setRemainingWords] = useState(Infinity)\n\n  let intervalID = undefined\n\n  useEffect(() => {\n    // console.log('status page loaded');\n    clearInterval(intervalID);\n    props.socket.on('server: response for start time', startTime => {\n      try {\n        // alert('setting starttime');\n        startTime = new Date(startTime);\n        const startTimeTotalSecs = getSeconds(startTime);\n        const nowSecs = getSeconds(new Date());\n        let diffSecs = nowSecs - startTimeTotalSecs;\n        // let expectedTime = diffSecs / (props.recordedProgress / props.data_length - 1)\n        // console.log(diffSecs);\n        const hours = Math.floor(diffSecs / 3600)\n        diffSecs -= hours * 3600;\n        const mins = Math.floor(diffSecs / 60);\n        diffSecs -= mins * 60;\n        const secs = diffSecs\n        const totalRecordingTime = [hours, mins, secs];\n        displayTime(totalRecordingTime);\n        intervalID = setInterval(() => tick(totalRecordingTime), 1000);\n      } catch (NotYetLoadedException) {\n        console.error(NotYetLoadedException);\n      }\n    });\n    showTime();\n    setRemainingWords(0);\n    console.log(remainingWords);\n    // setRemainingWords(totalWords - wordsCompleted)\n  }, [])\n\n  const displayTime = time => {\n    try {\n      document.getElementById('total_time_elapsed').style.color = 'rgba(255,255,255,0.8';\n      document.getElementById('total_time_elapsed').innerText =\n        '总记录时间: ' +\n        ('0' + time[0]).slice(-2) +\n        ':' +\n        ('0' + time[1]).slice(-2) +\n        ':' +\n        ('0' + time[2]).slice(-2);\n    } \n    catch(NotYetLoadedException) {\n      //\n    }\n  }\n\n  let time = undefined\n  const tick = initTime => {\n    if (!time) {\n      time = initTime;\n    } \n    // console.log('ticking')\n    let hour = time[0];\n    let min = time[1];\n    let sec = time[2];\n\n    if (sec < 60) {\n      sec += 1;\n    }\n    if (sec === 60) {\n      min += 1;\n      sec = 0;\n    }\n    if (min === 60) {\n      hour += 1;\n      min = 0;\n    }\n    time = [hour, min, sec];\n    // console.log(time);\n    try {\n      displayTime(time);\n    } catch (SomeError) {\n      console.error(SomeError);\n    }\n  };\n\n  const getSeconds = date => \n    date.getHours() * 60 * 60 +\n    date.getMinutes() * 60 +\n    date.getSeconds();\n\n  const helper_showTime = () => {\n    // console.log('asking for start time now');\n    props.socket.emit('client: ask for start time');\n  };\n\n  const showTime = () => {\n    try {\n      document.getElementById('showTimeBtn').click();\n      document.getElementById('showTimeBtn').disabled = true;\n    } catch (NotYetLoadedException) {\n      //\n    }\n  };\n\n\n\n  return (\n    <div>\n      <pre id='total_time_elapsed' style={{color: 'rgba(255,255,255,0.8'}}>总记录时间: 00:00:00</pre>\n      <button\n        onClick={helper_showTime}\n        id='showTimeBtn'\n        className='hidden_button'\n      ></button>\n    </div>\n  );\n}\n\nStatus.propTypes = {\n  // recordedProgress: PropTypes.number.isRequired,\n  // data_length: PropTypes.number.isRequired,\n  // recordGreenLight: PropTypes.bool.isRequired,\n  // helper_checkIfMobileView: PropTypes.func.isRequired,\n  socket: PropTypes.object.isRequired,\n  // totalWords: PropTypes.number.isRequired\n\n};","/**\n * **Based on: http://www.cssscript.com/demo/pure-css-css3-smooth-toggle-switch/**\n */\n\nimport React, { useEffect }from 'react'\nimport './toggle.scss'\nimport PropTypes from 'prop-types';\n\n/**\n * \n * @param {*} props \n */\nexport default function Toggle(props) {\n  useEffect(() => {\n    const toggle = document.getElementById(props.id);\n    try {\n      toggle.addEventListener('change', () => {\n        props.onChangeFunc(toggle.checked);\n      });\n      // document.getElementsByClassName('switch-wrapper')[0].addEventListener('mouseover', () => {\n      //   document.getElementsByClassName('inset-toggle')[0].classList.add('switch-hover');\n      //   console.log('hovered over')\n      // });\n      // document.getElementsByClassName('switch-wrapper')[0].addEventListener('mouseout', () => {\n      //   document.getElementsByClassName('inset-toggle')[0].classList.remove('switch-hover');\n      //   console.log('hovered out')\n      // })\n    } catch (NotYetLoadedException) {\n      //\n    }\n  }, [])\n  return (\n    <div className=\"switch-wrapper\">\n      <div className=\"switch\">\n      <div className=\"invisible_pushdown\"></div>\n        <input type=\"checkbox\" name=\"toggle\" id={props.id}  checked={props.checked} onChange={props.updateDebugMode}/>\n        <label htmlFor=\"toggle\" className=\"inset-toggle\"><i></i></label>\n      </div>  \n    </div>\n  )\n}\n\nToggle.propTypes = {\n  id: PropTypes.string.isRequired,\n  onChangeFunc: PropTypes.func.isRequired,\n  checked: PropTypes.bool.isRequired,\n  updateDebugMode: PropTypes.func.isRequired\n}","import React from 'react'\nimport './Checkmark.scss'\n\n/**\n * **Based on: https://codepen.io/ashleygalante/pen/nwoKh**\n */\nexport default function Checkmark() {\n  return (\n    <div className=\"checkmark-container\">\n      <div className=\"checkmark\">\n        <svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 161.2 161.2\" enableBackground=\"new 0 0 161.2 161.2\" xmlSpace=\"preserve\">\n          <path className=\"path\" fill=\"none\" stroke=\"#FFBA49\" strokeMiterlimit=\"10\" d=\"M425.9,52.1L425.9,52.1c-2.2-2.6-6-2.6-8.3-0.1l-42.7,46.2l-14.3-16.4\n            c-2.3-2.7-6.2-2.7-8.6-0.1c-1.9,2.1-2,5.6-0.1,7.7l17.6,20.3c0.2,0.3,0.4,0.6,0.6,0.9c1.8,2,4.4,2.5,6.6,1.4c0.7-0.3,1.4-0.8,2-1.5\n            c0.3-0.3,0.5-0.6,0.7-0.9l46.3-50.1C427.7,57.5,427.7,54.2,425.9,52.1z\"/>\n          <circle className=\"path\" fill=\"none\" stroke=\"#FFBA49\" strokeWidth=\"4\" strokeMiterlimit=\"10\" cx=\"80.6\" cy=\"80.6\" r=\"62.1\"/>\n          <polyline className=\"path\" fill=\"none\" stroke=\"#FFBA49\" strokeWidth=\"6\" strokeLinecap=\"round\" strokeMiterlimit=\"10\" points=\"113,52.8 \n            74.1,108.4 48.2,86.4 \"/>\n          <circle className=\"spin\" fill=\"none\" stroke=\"#FFBA49\" strokeWidth=\"4\" strokeMiterlimit=\"10\" strokeDasharray=\"12.2175,12.2175\" cx=\"80.6\" cy=\"80.6\" r=\"73.9\"/>\n        </svg>\n      </div>\n      <p id=\"complete_message\">🔥 恭喜您完成 🔥</p>\n    </div>\n  )\n}\n","import React from 'react'\nimport './Fireworks.scss'\n\nexport default function Fireworks() {\n  return (\n    <div className=\"pyro\">\n      <div className=\"before\"></div>\n      <div className=\"after\"></div>\n      </div>\n  )\n}\n","import React from 'react'\nimport Checkmark from './Checkmark/Checkmark'\nimport Fireworks from './Fireworks/Fireworks'\nimport './CompleteAnimation.scss'\n\nexport default function CompleteAnimation() {\n  return (\n    <div className=\"CompleteAnimationBG\">\n      <Fireworks />\n      <Checkmark />\n    </div>\n  )\n}","import React from 'react'\nimport PropTypes from 'prop-types';\nimport { Line, Circle } from 'rc-progress';\n\nexport default function ProgressBar(props) {\n  const percent = ((props.curr ) / (props.total + 1) * 100).toFixed(2);\n  const alignmentStyle = props.align === 'left' ? { margin: '0' } : {};\n  return (\n    <div className=\"progress_bar\" style={alignmentStyle}>\n      <pre style={{color: props.strokeColor}}>\n        {props.title}: {props.curr} / {props.total + 1} ({percent}%)\n      </pre>\n      <div style={{height: '7px'}}></div>\n      {props.shape === 'line' &&\n      <Line\n        className=\"line-progress\"\n        percent={percent}\n        strokeWidth={props.strokeWidth}\n        trailWidth={props.strokeWidth}\n        strokeColor = {props.strokeColor}\n        trailColor='#363732'\n      />}\n      {props.shape === 'circle' &&\n      <Circle \n        className=\"circle-progress\"\n        percent={percent}\n        strokeWidth={props.strokeWidth}\n        trailWidth={props.strokeWidth}\n        strokeColor = {props.strokeColor}\n        trailColor='#363732'\n      />}\n    </div>\n  );\n}\n\nProgressBar.propTypes = {\n  curr: PropTypes.number.isRequired,\n  total: PropTypes.number.isRequired,\n  align: PropTypes.string.isRequired,\n  strokeWidth: PropTypes.number.isRequired,\n  title: PropTypes.string.isRequired,\n  shape: PropTypes.string.isRequired,\n  strokeColor: PropTypes.string.isRequired,\n};\n","/* eslint-disable no-console */\nimport React from 'react';\nimport { Helmet } from 'react-helmet'\nimport update from 'react-addons-update'\nimport qs from '../utils/qs'\nimport cogoToast from 'cogo-toast';\nimport { HashRouter as Router, Route } from \"react-router-dom\";\nimport io from 'socket.io-client';\nimport { useMediaQuery } from'react-responsive'\n// scss\nimport './App.scss';\n\n// components\nimport CameraList from '../components/CameraList/CameraList';\nimport Tester from '../components/Tester/Tester';\nimport DataCollection from '../components/Table/DataCollection';\nimport Modal from '../components/Modal'\nimport Status from '../components/Status'\nimport Toggle from '../components/Toggle/Toggle'\nimport CompleteAnimation from '../components/CompleteAnimation/CompleteAnimation'\nimport ProgressBar from '../components/ProgressBar'\n\n// data\nimport sentences from '../assets/data/sentences.txt';\nimport pinyin from '../assets/data/sentences-pinyin-accent-nospecialchar.txt'\n// import sentences from '../assets/data/sentences-english-test.txt';\n\n// util\nimport ip_util from '../utils/ip'\n\n// chevron\nimport up_chevron from '../assets/svg/up-chevron.svg'\nimport down_chevron from '../assets/svg/down-chevron.svg'\n\n\nclass App extends React.Component {\n  /**\n   * **Basic Configuration**\n   */\n  sentencesPerPageInTable = 4; // sentences per page of Table\n  curr_index = qs('sentence_index'); // extracts the curr index from URL\n  ip_address = 'http://192.168.0.101:5000'; // default IP address of server\n\n  /**\n   * **CogoToast References to call to hide toasts**\n   */\n  showNoCamsRef = undefined;\n  hideServerOfflineRef = undefined;\n\n  /**\n   * **ReactJS Framework Initializing States onCreate**\n   * Constructor for main react App Component\n   * @param {object} props\n   */\n  constructor(props) {\n    super(props);\n    this.state = {\n      addCamState: false,\n      connectedOrderMap: {},\n      connectedToServer: false,\n      computerID: -1,\n      computerStatus: {},\n      currSentence: '',\n      currSentenceIndex: this.curr_index ? Number(this.curr_index) : 0,\n      currPageInTable: this.curr_index\n        ? Math.floor(Number(this.curr_index) / this.sentencesPerPageInTable) + 1\n        : 1,\n      data: [],\n      detectedNumCams: 0,\n      debugMode: false,\n      ip: this.ip_address,\n      numFilesSavedTotal: 0,\n      numFilesSavedInd: 0,\n      recordProgress: 0,\n      recordGreenLight: false,\n      remainingWords: 0,\n      requiredNumCams: 8,\n      sentencesPerPageInTable: this.sentencesPerPageInTable, // sentences per page\n      startTime: undefined,\n      socket: io(this.ip_address),\n      totalTime: [],\n      totalWords: 0\n    };\n  }\n\n  Desktop = ({ children }) => {\n  const isDesktop = useMediaQuery({ minWidth: 992 });\n  // if (isDesktop) {this.setState({viewMode: 'desktop'});}\n  // console.log('This is desktop mode');\n  return isDesktop ? children : null\n  }\n\n  Tablet = ({ children }) => {\n    const isTablet = useMediaQuery({ minWidth: 768, maxWidth: 991 });\n    console.log('isTablet: ', isTablet);\n    // if (isTablet) {this.setState({viewMode: 'tablet'})}\n    return isTablet ? children : null\n  }\n  Mobile = ({ children }) => {\n    const isMobile = useMediaQuery({ maxWidth: 767 });\n    // if (isMobile) {this.setState({viewMode: 'mobile'})}\n    return isMobile ? children : null\n  }\n  Default = ({ children }) => {\n    // console.log('This is not mobile mode');\n    const isNotMobile = useMediaQuery({ minWidth: 768 });\n    // if (isNotMobile) {this.setState({viewMode: 'default'})}\n    return isNotMobile ? children : null\n  }\n\n  render() {\n    return (\n      <Router>\n        <Helmet><title>s3and0s—webcam recorder</title></Helmet>\n        {/* <Route path='/' exact component={} /> */}\n        <Route path='/admin' exact component={this.main_adminView} />\n         <div>\n          <this.Desktop>{this.main_userView()}</this.Desktop>\n          <this.Tablet>Tablet</this.Tablet>\n          <this.Mobile>\n            {this.main_adminView()}\n            <div className='mobileAdminView' style={{textAlign: 'center'}}>\n              {/* <hr/> */}\n              {/* <p><strong>Sentence: </strong></p> */}\n              <p style={{fontSize: '0.8em'}}>句子索引: {this.state.currSentenceIndex}</p>\n              {/* <hr/> */}\n              {(this.state.pinyin) ? this.state.pinyin[this.state.currSentenceIndex]: ''}\n              <br/>\n              {this.state.currSentence}\n              {/* <hr/> */}\n              <Status socket={this.state.socket}/>\n              {this.comp_totalProgress(true, 4)}\n              {/* <hr/> */}\n              {this.comp_saveProgress(true)}\n              {/* <hr/> */}\n              {this.terminal()}\n            </div>\n\n            {this.comp_bottomAdmin()}\n            </this.Mobile>\n          <this.Default>Not mobile (desktop or laptop or tablet)</this.Default>\n        </div>\n        {this.comp_modals()}\n        {this.comp_completeAnimation()}\n      </Router>\n    );\n  }\n\n  componentDidMount() {\n    try {\n      this.helper_emitInitialSocketMessages();\n      this.readTextFile(sentences, 'data');\n      this.readTextFile(pinyin, 'pinyin');\n\n      this.initSocketListeners();\n      document.getElementById('debug_mode').checked =\n        this.state.requiredNumCams === 1;\n      window.addEventListener('keydown', this.handler_keydown);\n      window.addEventListener('keyup', this.handler_keyup);\n      if (useMediaQuery({ minWidth: 768 })) {\n        this.showNoCamsRef = this.helper_showNoCamsConnected();\n      }\n      setTimeout(() => {\n        if (\n          !document\n          .getElementsByClassName('server_status')[0]\n          .className.includes('server_online')\n        ) {\n          this.hideServerOfflineRef = this.helper_showServerNotOnline();\n        }\n      }, 1000);\n    } catch (NotYetLoadedException) {\n      // console.error(NotYetLoadedException)\n    }\n  }\n\n  terminal = () => {}\n\n  handler_hoverMouseOutDebug = () => {\n    try {\n      document.getElementsByClassName('debug-group')[0].className +=\n        ' ' + 'hideDebug';\n    } catch (NotYetLoadedException) {\n      console.error(NotYetLoadedException);\n    }\n  };\n\n  handler_hoverMouseOverDebug = () => {\n    try {\n      document\n        .getElementsByClassName('debug-group')[0]\n        .classList.remove('hideDebug');\n    } catch (NotYetLoadedException) {\n      console.error(NotYetLoadedException);\n    }\n  };\n\n  handler_hoverMouseOutBottom = () => {\n    try {\n      document.getElementsByClassName('panel_BG')[0].className +=\n        ' ' + 'hideBottom';\n    } catch (NotYetLoadedException) {\n      console.error(NotYetLoadedException);\n    }\n  };\n\n  handler_hoverMouseOverBottom = () => {\n    try {\n      document\n        .getElementsByClassName('panel_BG')[0]\n        .classList.remove('hideBottom');\n    } catch (NotYetLoadedException) {\n      console.error(NotYetLoadedException);\n    }\n  };\n\n  /**\n   * **ReactJS Framework Method**\n   */\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handler_keydown);\n  }\n\n  comp_saveProgress = override => {\n    return qs('name') || override ? <ProgressBar\n          title=\"视频文件已保存\"\n          curr={this.state.numFilesSavedInd}\n          total={this.state.requiredNumCams - 1}\n          align={'center'}\n          strokeWidth={17}\n          shape='circle'\n          strokeColor='lightgreen'\n        /> : <></>\n  }\n\n  /**\n   * **Component: User Page**\n   * Renders components for desktop view\n   */\n  main_userView = () => {\n    return (\n      <div className='container'>\n        {/* <span id='debug_hover_area'> */}\n          {this.comp_debug()}\n        {/* </span> */}\n        {this.comp_tester()}\n        {/* <span id='bottom_hover_area'> */}\n        \n        {this.comp_bottomAdmin(true)}\n        {/* </span> */}\n      </div>\n    );\n  };\n\n  comp_totalProgress = (override, strokeWidth) => {\n    return (qs('name') || override) ? <ProgressBar\n        shape='line'\n        title={'读完句子的进度'}\n        curr={this.state.recordProgress}\n        total={this.state.data.length - 1}\n        align={'center'}\n        strokeWidth={strokeWidth}\n        strokeColor='#3bb8ce'\n      /> : <></>\n  }\n\n  comp_bottomAdmin = (isMobile) => {\n    return <div className='contents'>\n            <div className=\"panel_BG hideBottom\">\n              <div style= {{marginTop: '-50px'}}>\n                <div style={{ width: '100vw', height: '50px', position: 'relative', top: '50px', left: '0'}} onClick={this.helper_toggleHideBottom}> </div>\n                <img style={{ position: 'relative', top: '0', left: '0'}} className='chevron' src={down_chevron}></img>\n              </div>\n              <div className='panel_container'>\n                <div className='left_panel'>{this.comp_dataCollection()}</div>\n                {isMobile &&\n                <div className='right_panel'>\n                  <h3>Cameras</h3>\n                  <div className='cameras_container'>\n                    {this.comp_cameraList()}\n                  </div>\n                </div>\n                }\n              </div>\n            </div>\n          </div>\n  }\n\n  /**\n   * **Component: Admin Page**\n   * Renders components for mobile view\n   */\n  main_adminView = () => {\n    return <div style={{ textAlign: 'center' }}>{this.comp_debug()}</div>;\n  };\n\n  /**\n   * **Component: PlaygroundPage**\n   * Renders components for experimental purposes\n   */\n  main_playground = () => {\n    return <Toggle />;\n  };\n\n  comp_debugHover = () => {};\n\n  /**\n   * **Component: Animation for Study Completion**\n   */\n  comp_completeAnimation = () => {\n    if (this.state.recordProgress + 1 === this.state.data.length) {\n      try {\n        document.getElementById('testerNextBtn').disabled = true;\n      } catch (NotYetLoadedException) {\n        //\n      }\n      return <CompleteAnimation />;\n    }\n  };\n\n  // * COMPONENT * //\n  comp_dataCollection = () => {\n    return (\n      <DataCollection\n        data={this.state.data}\n        updateName={this.updateName}\n        curr_sentence={this.state.currSentence}\n        socket={this.state.socket}\n        curr_sentence_index={this.state.currSentenceIndex}\n        curr_page={this.state.currPageInTable}\n        updatePage={this.updatePage}\n        sentencesPerPageInTable={this.state.sentencesPerPageInTable}\n      />\n    );\n  };\n\n  // * COMPONENT * //\n  comp_tester = () => {\n    return (\n      <Tester\n        updateSentence={this.updateSentence}\n        data={this.state.data}\n        curr_sentence_index={this.state.currSentenceIndex}\n        data_length={this.state.data.length}\n        first_sentence={this.state.data[this.state.currSentenceIndex]}\n        curr_sentence={this.state.currSentence}\n        socket={this.state.socket}\n        recordGreenLight={\n          this.state.recordGreenLight &&\n          this.state.numFilesSavedTotal % this.state.requiredNumCams === 0\n        }\n        debugMode={this.state.debugMode}\n        numFilesSaved={this.state.numFilesSavedTotal}\n        requiredNumCams={this.state.requiredNumCams}\n        updateGreenLightStatus={this.updateGreenLightStatus}\n        recordedProgress={this.state.recordProgress}\n        updateRecordProgress={this.updateRecordProgress}\n        totalTime={this.state.totalTime}\n        updateTotalTime={this.updateTotalTime}\n        showFileSavingLoader={this.disp_showFileSavingLoader}\n        connectedToServer={this.state.connectedToServer}\n        detectedNumCams={this.state.detectedNumCams}\n        comp_saveProgress={this.comp_saveProgress}\n        comp_totalProgress={this.comp_totalProgress}\n      />\n    );\n  };\n\n  // * COMPONENT * //\n  comp_cameraList = () => {\n    return (\n      <CameraList\n        socket={this.state.socket}\n        computerID={this.state.computerID}\n        computerStatus={this.state.computerStatus}\n        updateConnectionStatus={this.updateConnectionStatus}\n        addCamState={this.state.addCamState}\n        toggleCamState={this.helper_toggleCamState}\n        updateDetectedNumCams={this.updateDetectedNumCams}\n        addCam={this.admin_resetCams}\n      />\n    );\n  };\n\n  // * COMPONENT * //\n  comp_status = () => {\n    return (\n      <Status\n        totalWords={this.state.totalWords}\n        data_length={this.state.data.length}\n        recordedProgress={this.state.recordProgress}\n        helper_checkIfMobileView={this.helper_checkIfMobileView}\n        recordGreenLight={this.state.recordGreenLight}\n        socket={this.state.socket}\n      />\n    );\n  };\n\n  // * COMPONENT * //\n  comp_modals = () => {\n    return (\n      <div>\n        <Modal\n          modalID={'resetProgressModal'}\n          socket={this.state.socket}\n          title={'Are you sure?'}\n          message={'Resetting progress will be permanent.'}\n          buttonCancel={'Cancel'}\n          buttonConfirm={'Reset Progress'}\n          buttonConfirmId={'resetProgressBtn'}\n          toast={'Progress reset'}\n          confirmFunc={this.admin_resetProgress}\n        />\n        <Modal\n          modalID={'overallStatus'}\n          socket={this.state.socket}\n          title={'Status'}\n          onLoadFunc={this.getStatus}\n          message={this.comp_status()}\n          buttonConfirm={'Hide'}\n        />\n      </div>\n    );\n  };\n\n  updateDebugMode = () => {\n    this.setState({ debugMode: !this.state.debugMode });\n  };\n\n  // * COMPONENT * //\n  comp_debug = () => {\n    return (\n      < div className = 'debug-group hideDebug' >\n        <label className='debug_label'>Admin: </label>\n\n        {/* <button\n          onClick={() => {\n            this.helper_toggleModal('overallStatus');\n            this.getStatus();\n          }}\n          className='debug_button'\n        >\n          Status\n        </button> */}\n        <button\n          id='resetCamsBtn'\n          className='debug_button'\n          onClick={this.admin_resetCams}\n        >\n          Add Webcam\n        </button>\n        <button\n          className='debug_button'\n          onClick={() => {\n            this.helper_toggleModal('resetProgressModal');\n          }}\n        >\n          Reset Progress\n        </button>\n\n        <div className='debug_inline_group'>\n          <label className='debug_label'>Debug: </label>\n          <Toggle\n            id='debug_mode'\n            onChangeFunc={this.handler_debugToggle}\n            checked={this.state.debugMode}\n            updateDebugMode={this.updateDebugMode}\n          />\n        </div>\n       {/* {(useMediaQuery({ minWidth: 768 })) &&<br/> } */}\n        <div className='debug_inline_group'>\n          <label htmlFor='' className='debug_label'>\n            Cams:{' '}\n          </label>\n          <input\n            id='numCamsInput'\n            type='text'\n            className='debug_text_input debug_sm_input warning_message'\n            value={this.state.detectedNumCams}\n            readOnly\n          />\n        </div>\n\n        <div className='debug_inline_group'>\n            <label htmlFor='' className='debug_label'>\n            Server:{' '}\n          </label>\n          <span className='server_status'></span>\n          <input\n            id='inputServerIP'\n            type='text'\n            className='debug_text_input warning_message'\n            value={this.state.ip}\n            onChange={this.handler_IPOnChange}\n          />\n          <button\n            className='debug_button'\n            onClick={this.handler_useThisCompAsServer}\n          >\n            {' '}\n            📡{' '}\n          </button>\n        </div>\n\n\n        <div\n          style={{ width: '100%', height: '100%' }}\n          onClick={this.helper_toggleHideDebug}\n        >\n          <img className='chevron top-chevron' src={up_chevron}></img>\n          <div style={{height: '0.3em'}}></div>\n        </div>\n\n        {/* <button className='debug_button' onClick={this.admin_refreshAll}>\n          Refresh All\n        </button> */}\n\n        <button\n          onClick={this.disp_showFileSavedMessage}\n          id='showSavedFilesBtn'\n          className='hidden_button'\n        ></button>\n\n        {/* <pre hidden={this.state.numCams === 8}>\n          debug mode, remember to change num cams back to 8\n        </pre> */}\n      </div>\n    );\n  };\n\n  // * UTILITY * //\n  readTextFile(file, stateName) {\n    fetch(file)\n      .then(response => response.text())\n      .then(text => {\n        if (stateName === 'data') {\n          this.setState({ data: text.split('\\n') }, () => {\n            let currSentence = qs('sentence_index')\n              ? this.state.data[Number(qs('sentence_index'))]\n              : this.state.data[0];\n            this.setState({ currSentence }, () => {\n              // console.log(this.state.curr_sentence)\n            });\n            this.setState({\n              totalWords: this.state.data.reduce(\n                (sum, sentence) => sum + sentence.length,\n                0\n              )\n            });\n          });\n        } else {\n          this.setState({ pinyin: text.split('\\n') })\n        }\n      });\n  }\n\n  /**\n   * * UPDATE *\n   *\n   */\n  updateFilesSaved = numFiles => {\n    const successMessage =\n      numFiles % this.state.requiredNumCams === 0\n        ? ' (successful)'\n        : ' (not all cams saved!!)';\n    this.setState({\n      numFilesSavedTotal: numFiles\n    });\n    if (successMessage === ' (successful)') {\n      this.updateGreenLightStatus(true);\n    }\n    try {\n      document.getElementById('num_files_saved').innerHTML =\n        'Total Files Saved: ' + numFiles + successMessage;\n    } catch (NotYetLoadedException) {\n      // console.error(NotYetLoadedException);\n    }\n  };\n\n  handler_useThisCompAsServer = () => {\n    ip_util.clientGetIP(ip => {\n      console.log(ip);\n      if (ip.split('.').length === 4) {\n        ip = 'http://' + ip + ':5000';\n        cogoToast.loading(ip, {\n          position: 'top-right',\n          hideAfter: 3,\n          onClick: hide => {\n            hide();\n          }\n        });\n        this.helper_setServerIP(ip);\n        // if (!this.hideServerOfflineRef) {\n        //   this.hideServerOfflineRef = this.helper_showServerNotOnline();\n        // } else {\n        //   this.hideServerOfflineRef();\n        // }\n      }\n    });\n    // const [ip_v6, ip_v4] = [temp[0], temp[1]]\n    // console.log(ip_v4);\n  };\n\n  handler_IPOnChange = e => {\n    this.setState({ ip: e.target.value });\n  };\n\n  debugCogoToastOnRef = undefined;\n  debugCogoToastOffRef = undefined;\n  \n  showDebugOn = () => {\n    return cogoToast.success(<p>Debug on. <br/>Required Cams: 1</p>, { hideAfter: 1, onClick: hide => hide() });\n  }\n\n  showDebugOff = () => {\n    return cogoToast.warn(<p>Debug off. <br/>Required Cams: 8</p>, { hideAfter: 1, onClick: hide => hide() });\n  }\n\n  handler_debugToggle = debugMode => {\n    console.log('toggling debug mode');\n    this.setState({ debugMode }, () => {\n      if (debugMode) {\n        this.setState({ requiredNumCams: 1 });\n        this.debugCogoToastOnRef = this.showDebugOn();\n        {/* if (this.debugCogoToastOffRef) {this.debugCogoToastOffRef()} */}\n        {/* console.log(this.debugCogoToastOffRef); */}\n        {/* this.helper_removeHoverEventListeners(); */}\n      } else {\n        this.setState({ requiredNumCams: 8 });\n        this.debugCogoToastOffRef = this.showDebugOff();\n        {/* if (this.debugCogoToastOnRef) {this.debugCogoToastOnRef()} */}\n        {/* console.log(this.debugCogoToastOnRef); */}\n\n        // this.helper_addHoverEventListeners();\n        this.handler_hoverMouseOutBottom();\n      }\n    });\n  };\n\n  handler_fileSaveSuccess = numFiles => {\n    this.updateFilesSaved(numFiles);\n    this.setState(\n      {\n        numFilesSavedInd: this.state.numFilesSavedInd + 1\n      },\n      () => {\n        {/* console.log('this occured: ' + this.state.numFilesSavedInd + ' times.'); */}\n\n        try {\n          document.getElementById('testerNextBtn').disabled = true;\n        } catch (NotYetLoadedException) {\n          //\n        }\n        if (this.state.numFilesSavedInd === this.state.requiredNumCams) {\n          {/* console.log('correct number of files saved'); */}\n          try {\n            document.getElementById('showSavedFilesBtn').click();\n            document.getElementById('showSavedFilesBtn').disabled = true;\n            this.setState(\n              {\n                numFilesSavedInd: 0\n              },\n              () => {\n                cogoToast.success(\n                  this.style_makeEmojiToastLayout(\n                    ['视频已成功保存', '可继续录'],\n                    '🔥'\n                  ),\n                  {\n                    hideAfter: 1,\n                    onClick: hide => {\n                      hide();\n                    }\n                  }\n                );\n              }\n            );\n\n            this.updateGreenLightStatus(true);\n          } catch (Exception) {\n            console.error(Exception);\n          }\n          try {\n            if (this.helper_checkIfMobileView()) {\n              // console.log('here here??');\n              cogoToast.info(\n                'Completed @ Sentence [' + this.state.recordProgress + ']',\n                {\n                  hideAfter: 0.75,\n                  onClick: hide => {\n                    hide();\n                  }\n                }\n              );\n            }\n          } catch (NotYetLoadedException) {\n            console.error(NotYetLoadedException);\n          }\n        }\n      }\n    );\n  };\n\n  updateDetectedNumCams = detectedNumCams => {\n    this.setState({ detectedNumCams });\n    this.updateGreenLightStatus(true);\n    this.showNoCamsRef();\n    try {\n      document.getElementsByClassName('debug_sm_input')[0].className +=\n        this.state.detectedNumCams > 0 ? ' serverPlaceholderConnected' : '';\n      document\n        .getElementById('numCamsInput')\n        .classList.remove('warning_message');\n    } catch (NotYetLoadedException) {\n      //\n    }\n  };\n\n  /**\n   * * UPDATE *\n   * Updates the state computerID with param id\n   * @param {string} id\n   */\n  updateCompID = id => {\n    const status = {};\n    this.setState({ computerID: id });\n    status[this.state.computerID] = [];\n    this.setState({ computerStatus: status }, () => {\n      // console.log(\"init computer status\", this.state.computerStatus);\n    });\n  };\n\n  /**\n   * * STYLE *\n   * Takes a string and finds a substring and returns a stylized version of it,\n   * specifically to add the 🖥 icon in front of the ID.\n   * @param {string} str The full string\n   * @param {string} find The particular substring to find\n   * @returns {string} The stylized string\n   */\n  style_addThisCpuIcon = (str, find) => {\n    var re = new RegExp(find, 'g');\n    return str.replace(re, '🖥: ' + find);\n  };\n\n  style_makeEmojiToastLayout = (msg, emoji) => {\n    return (\n      <div className='cogo-toast'>\n        <div className='cogo-toast-emoji-left'> {emoji}</div>\n        <div>\n          {msg[0]}\n          <br />\n          {msg[1]}\n        </div>\n        <div className='cogo-toast-emoji-right'> {emoji}</div>\n      </div>\n    );\n  };\n\n  ref_hideLoader = undefined;\n  disp_showFileSavingLoader = () => {\n    this.ref_hideLoader = cogoToast.loading(\n      this.style_makeEmojiToastLayout(['视频正在保存', '请耐心等待'], '⌛️'),\n      {\n        hideAfter: 0,\n        onClick: hide => {\n          hide();\n        }\n      }\n    );\n    // setTimeout(hideLoader, 2000);\n    // hideLoader();\n    // this.setState({ hideLoader }, () => {\n    //   console.log(hideLoader);\n    // });\n  };\n\n\n  /**\n   * Hides file saved loader\n   */\n  disp_showFileSavedMessage = () => {\n    try {\n      this.ref_hideLoader();\n    } catch (NotOnPageError) {\n      //\n    }\n  };\n\n  disp_showServerConencted = () => {\n    cogoToast.success('Server is online.', {\n      position: 'top-right',\n      hideAfter: 0,\n      onClick: hide => {\n        hide();\n      }\n    });\n    if (this.hideServerOfflineRef) this.hideServerOfflineRef();\n    try {\n      document\n        .getElementsByClassName('server_status')[0]\n        .classList.add('server_online');\n      document\n        .getElementById('inputServerIP')\n        .classList.add('serverPlaceholderConnected');\n      document\n        .getElementById('inputServerIP')\n        .classList.remove('warning_message');\n    } catch (NotYetLoadedException) {\n      //\n    }\n  }\n\n\n  /**\n   * Socket Listeners — adds socket listeners to the page to respond to \n   * messages sent from server\n   */\n  initSocketListeners = () => {\n    this.state.socket.on('server: online', () => {\n      {/* console.log('did this happen?') */}\n      {/* if (useMediaQuery({ minWidth: 768 })) { */}\n        this.disp_showServerConencted();\n      {/* } */}\n    });\n\n    if (!this.hideServerOfflineRef) {\n      this.hideServerOfflineRef = this.helper_showServerNotOnline();\n    } else {\n      this.hideServerOfflineRef();\n    }\n\n    this.state.socket.on('server: disconnected', () => {\n      this.setState({ connectedToServer: false }, () => {\n        document\n          .getElementsByClassName('server_status')[0]\n          .classList.remove('server_online');\n        document\n          .getElementById('inputServerIP')\n          .classList.remove('serverPlaceholderConnected');\n      });\n    });\n\n    this.state.socket.on('server: connected', computerID => {\n      {/* console.log('detected server connected'); */}\n      {/* if (useMediaQuery({ minWidth: 768 })) { */}\n        this.disp_showServerConencted();\n      {/* } */}\n      \n      this.setState({ connectedToServer: true, computerID }, () => {\n        try {\n          document\n            .getElementById('inputServerIP')\n            .classList.add('serverPlaceholderConnected');\n        } catch(NotYetLoadedException) {\n          //\n        }\n      });\n    });\n\n    this.state.socket.on('server: connected sync id', id => {\n      if (this.updateCompID) this.updateCompID(id);\n      this.updateCompID = null;\n    });\n\n    this.state.socket.on('server: reset cams', () => {\n      this.updateGreenLightStatus(true);\n    });\n\n    this.state.socket.on('server: response for connection status', status => {\n      try {\n        document.getElementById(\n          'connection_status'\n        ).innerHTML = this.style_addThisCpuIcon(\n          JSON.stringify(status, null, 2),\n          this.state.computerID\n        );\n      } catch (NotOnPageError) {\n        //\n      }\n    });\n\n    this.state.socket.on('server: response for progress', progress => {\n      this.setState({ recordProgress: progress ? progress : 0 });\n    });\n\n    this.state.socket.on('server: response for numFilesSaved', numFiles => {\n      this.updateFilesSaved(numFiles);\n    });\n\n    this.state.socket.on('server: save files successful', numFiles => {\n      this.handler_fileSaveSuccess(numFiles);\n    });\n\n    this.state.socket.on('server: computer connected order', connectedOrder => {\n      this.setState({\n        connectedOrderMap: update(this.state.connectedOrderMap, {\n          $merge: connectedOrder\n        })\n      });\n    });\n\n    const refreshRates = [0, 666, 1332];\n    this.state.socket.on('server: refresh all', () => {\n      const conectedOrderNum = this.state.connectedOrderMap[\n        this.state.computerID\n      ];\n      const indexRefresh = conectedOrderNum % 3;\n      const time = refreshRates[indexRefresh];\n      setTimeout(() => {\n        window.location.reload(false);\n      }, time);\n    });\n  };\n\n  async pingServer() {\n    try {\n      const serverID = this.state.socket.io.opts.hostname;\n      const response = await fetch(serverID, { mode: 'no-cors' });\n      if (!response.ok) {\n        console.error('no response from server');\n      } else {\n        console.log('connection successful');\n      }\n    } catch (ServerPingFailedException) {\n      console.error(ServerPingFailedException);\n    }\n  }\n\n  /**\n   * **Update: Sentence**\n   * Sent as a prop to components to update app-level state of\n   * curr_sentence_index, and updates server with new index. It also updates\n   * url query without refreshing to reflect current index.\n   * @param {string} curr_sentence\n   */\n  updateSentence = currSentence => {\n    if (currSentence === '$next') {\n      this.setState(\n        { currSentenceIndex: this.state.currSentenceIndex + 1 },\n        () => {\n          this.updateSentence(this.state.data[this.state.currSentenceIndex]);\n          this.state.socket.emit('client: update sentence_index', {\n            name: qs('name'),\n            currSentenceIndex: this.state.currSentenceIndex\n          });\n        }\n      );\n    } else if (currSentence === '$prev') {\n      this.setState(\n        {\n          currSentenceIndex: Math.max(this.state.currSentenceIndex - 1, 0)\n        },\n        () => {\n          this.updateSentence(this.state.data[this.state.currSentenceIndex]);\n          this.state.socket.emit('client: update sentence_index', {\n            name: qs('name'),\n            currSentenceIndex: this.state.currSentenceIndex\n          });\n        }\n      );\n    } else {\n      window.history.pushState(\n        null,\n        null,\n        '?name=' +\n          qs('name') +\n          '&sentence_index=' +\n          this.state.currSentenceIndex\n      );\n      // console.log(curr_sentence);\n      this.setState({\n        currSentence,\n        currPageInTable:\n          Math.floor(\n            Number(this.state.currSentenceIndex) / this.state.sentencesPerPageInTable\n          ) + 1\n      });\n    }\n  };\n\n  updatePage = new_page => {\n    if (new_page === 0) {\n      // do nothing\n    }\n    console.log('update page', new_page);\n    this.setState({\n      currPageInTable: new_page >= 1 ? new_page : 1\n    });\n  };\n\n  updateRecordProgress = currSentenceIndex => {\n    // { <sentence_index> : <bool: recorded/not> }\n    this.setState(\n      {\n        recordProgress: currSentenceIndex\n      },\n      () => {\n        this.state.socket.emit(\n          'client: update recording progress',\n          currSentenceIndex\n        );\n      }\n    );\n  };\n\n  updateConnectionStatus = recordingStatus => {\n    if (this.state.computerStatus[this.state.computerID]) {\n      const status = {};\n      status[this.state.computerID] = recordingStatus;\n      this.setState({ computerStatus: status }, () => {});\n      this.state.socket.emit('client: update recording status', status);\n    }\n    this.getStatus();\n  };\n\n  updateGreenLightStatus = bool => {\n    this.setState({ recordGreenLight: bool });\n  };\n\n  updateTotalTime = time => {\n    this.setState({ totalTime: time });\n  };\n\n  getStatus = () => {\n    this.state.socket.emit('client: ping for connection status');\n    this.state.socket.emit('client: ping for numFilesSaved');\n    this.state.socket.emit('client: ping for progress');\n  };\n\n  admin_resetCams = () => {\n    // cogoToast.info('Adding Cam', {hideAfter: 1})\n    // this.state.socket.emit('client: stop cams');\n    // this.updateGreenLightStatus(true);\n    this.state.socket.emit('client: reset cams');\n    try {\n      document.getElementById('addCamBtn').click();\n    } catch (NotYetLoadedException) {\n      //\n    }\n    this.state.socket.emit('client: dummy vid, do not save');\n    // cogoToast.info('Cams are reset', { hideAfter: 0.3 });\n    // setTimeout(() => document.getElementById('resetCamsBtn').classList.remove('btn-active'), 1000);\n  };\n\n  admin_refreshAll = () => {\n    this.state.socket.emit('client: refresh all');\n  };\n\n  admin_resetProgress = () => {\n    this.state.socket.emit('client: update recording progress', 0);\n    this.state.socket.emit('client: delete total time');\n    this.state.socket.emit('client: reset total files');\n    this.state.socket.emit('client: save total start time', new Date());\n    window.location = window.location.origin;\n    this.state.socket.emit('client: save total time', [0, 0, 0]);\n  };\n\n  helper_emitInitialSocketMessages = () => {\n    if (!this.helper_checkIfMobileView) {\n      this.state.socket.emit('client: update sentence_index', {\n        name: qs('name'),\n        currSentenceIndex: this.state.currSentenceIndex\n      });\n    } else {\n      this.state.socket.emit('client: ask for recording status');\n    }\n    this.state.socket.emit('client: check for progress');\n    this.state.socket.emit('client: ask for sync id');\n  };\n\n  helper_toggleModal = id => {\n    document.getElementById(id).click();\n  };\n\n  helper_checkIfMobileView = () => {\n    return window.location.href.includes('mobile');\n  };\n\n  helper_showNoCamsConnected = () => {\n    return cogoToast.warn('No Webcams', {\n      hideAfter: 0,\n      position: 'top-left',\n      onClick: this.admin_resetCams\n    });\n  };\n\n  helper_showServerNotOnline = () => {\n    {/* console.log('no server'); */}\n    return cogoToast.warn('Server is offline', {\n      hideAfter: 0,\n      position: 'top-right',\n      onClick: hide => {\n        this.handler_useThisCompAsServer();\n        hide();\n      }\n    });\n  };\n\n  helper_setServerIP = ip => {\n    this.state.socket.disconnect();\n    try {\n      document\n        .getElementsByClassName('server_status')[0]\n        .classList.remove('server_online');\n      document\n        .getElementById('inputServerIP')\n        .classList.remove('serverPlaceholderConnected');\n    } catch (NotYetLoadedException) {\n      //\n    }\n    this.setState({\n      socket: io(ip),\n      ip: ip\n    });\n    this.state.socket.emit('client: check server connection');\n    // if (hideLoadServer) {hideLoadServer()}\n    setTimeout(() => {\n      if (\n        !document\n          .getElementsByClassName('server_status')[0]\n          .className.includes('server_online')\n      ) {\n        this.hideServerOfflineRef = this.helper_showServerNotOnline();\n      }\n    }, 3000);\n    this.initSocketListeners();\n  };\n\n  helper_addHoverEventListeners = () => {\n    const debugHoverArea = document.getElementById('debug_hover_area');\n    const bottomHoverArea = document.getElementById('bottom_hover_area');\n    debugHoverArea.addEventListener(\n      'mouseout',\n      this.handler_hoverMouseOutDebug\n    );\n    debugHoverArea.addEventListener(\n      'mouseover',\n      this.handler_hoverMouseOverDebug\n    );\n    bottomHoverArea.addEventListener(\n      'mouseout',\n      this.handler_hoverMouseOutBottom\n    );\n    bottomHoverArea.addEventListener(\n      'mouseover',\n      this.handler_hoverMouseOverBottom\n    );\n  };\n\n  helper_removeHoverEventListeners = () => {\n    const debugHoverArea = document.getElementById('debug_hover_area');\n    const bottomHoverArea = document.getElementById('bottom_hover_area');\n    debugHoverArea.removeEventListener(\n      'mouseout',\n      this.handler_hoverMouseOutDebug\n    );\n    debugHoverArea.removeEventListener(\n      'mouseover',\n      this.handler_hoverMouseOverDebug\n    );\n    bottomHoverArea.removeEventListener(\n      'mouseout',\n      this.handler_hoverMouseOutBottom\n    );\n    bottomHoverArea.removeEventListener(\n      'mouseover',\n      this.handler_hoverMouseOverBottom\n    );\n    this.handler_hoverMouseOverBottom();\n  };\n\n  helper_toggleHideDebug = () => {\n    console.log('toggling');\n    try {\n      if (\n        document\n          .getElementsByClassName('debug-group')[0]\n          .className.includes('hideDebug')\n      ) {\n        this.handler_hoverMouseOverDebug();\n      } else {\n        this.handler_hoverMouseOutDebug();\n      }\n    } catch (NotYetLoadedException) {\n      //\n    }\n  };\n\n  helper_toggleHideBottom = () => {\n    console.log('toggling hide bottom');\n    try {\n      if (\n        document\n          .getElementsByClassName('panel_BG')[0]\n          .className.includes('hideBottom')\n      ) {\n        this.handler_hoverMouseOverBottom();\n      } else {\n        this.handler_hoverMouseOutBottom();\n      }\n    } catch (NotYetLoadedException) {\n      //\n    }\n  };\n\n  helper_toggleCamState = () => {\n    this.setState({ addCamState: !this.state.addCamState });\n  };\n\n  handler_keyup() {\n    for (const btn of document.getElementsByClassName('debug_button')) {\n      btn.classList.remove('btn-active');\n    }\n  }\n\n  handler_keydown = event => {\n    let key = event.key;\n    const inputServerIP = document.getElementById('inputServerIP');\n\n    if (\n      [' ', 'ArrowLeft', 'ArrowRight', 'Escape', 'Enter', 's'].includes(key)\n    ) {\n      try {\n        if (key === ' ') {\n          document.getElementById('testerRecordBtn').click();\n          event.preventDefault();\n        } else if (key === 'ArrowLeft') {\n          if (document.activeElement !== inputServerIP) {\n            document.getElementById('testerPrevBtn').click();\n            event.preventDefault();\n          }\n        } else if (key === 'ArrowRight') {\n          if (document.activeElement !== inputServerIP) {\n            document.getElementById('testerNextBtn').click();\n            event.preventDefault();\n          }\n        } else if (key === 'Escape') {\n          document.getElementById('resetCamsBtn').click();\n          event.preventDefault();\n        } else if (key === 'Enter') {\n          console.log('detected enter key');\n          if (document.getElementsByClassName('modali-button-destructive')[0]) {\n            document\n              .getElementsByClassName('modali-button-destructive')[0]\n              .click();\n            this.admin_resetProgress();\n          }\n          if (document.activeElement === inputServerIP) {\n            this.helper_setServerIP(inputServerIP.value);\n            cogoToast.info('Updated IP: ' + inputServerIP.value, {\n              onClick: hide => {\n                hide();\n              }\n            });\n            event.preventDefault();\n          }\n        } else if (key === 's') {\n          {/* if (document.activeElement.nodeName.toLowerCase() !== 'input') */}\n            {/* this.helper_toggleModal('overallStatus'); */}\n        }\n      } catch (NotYetLoadedException) {\n        // console.error(NotYetLoadedException);\n      }\n    }\n  };\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './app/App.js';\n\nReactDOM.render(<App />, document.getElementById('root'));","module.exports = __webpack_public_path__ + \"static/media/collapse-chevron.126ea5d6.svg\";","module.exports = __webpack_public_path__ + \"static/media/expand-chevron.fd7409a7.svg\";","module.exports = __webpack_public_path__ + \"static/media/beg.565428a5.svg\";","module.exports = __webpack_public_path__ + \"static/media/end.b927e101.svg\";","module.exports = __webpack_public_path__ + \"static/media/sentences.16736696.txt\";","module.exports = __webpack_public_path__ + \"static/media/sentences-pinyin-accent-nospecialchar.d1ccd39d.txt\";","const os = require('os');\nconst ifaces = os.networkInterfaces();\n\nconst nodeGetIP = () => {\n  let address = undefined;\n  Object.keys(ifaces).forEach(function (ifname) {\n    ifaces[ifname].forEach(function (iface) {\n      if ('IPv4' !== iface.family || iface.internal !== false) {\n        // skip over internal (i.e. 127.0.0.1) and non-ipv4 addresses\n        return;\n      }\n      if (ifname === 'en0') {\n        address = iface.address;\n      }\n    });\n  });\n  console.log(address);\n  return address;\n}\n\nconst clientGetIP = onNewIP => { //  onNewIp - your listener function for new IPs\n  var myPeerConnection = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection; //compatibility for firefox and chrome\n  var pc = new myPeerConnection({\n      iceServers: []\n    }),\n    noop = function () {},\n    localIPs = {},\n    ipRegex = /([0-9]{1,3}(\\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/g;\n\n  function ipIterate(ip) {\n    if (!localIPs[ip]) onNewIP(ip);\n    localIPs[ip] = true;\n  }\n  pc.createDataChannel(\"\"); //create a bogus data channel\n  pc.createOffer(function (sdp) {\n    sdp.sdp.split('\\n').forEach(function (line) {\n      if (line.indexOf('candidate') < 0) return;\n      line.match(ipRegex).forEach(ipIterate);\n    });\n    pc.setLocalDescription(sdp, noop, noop);\n  }, noop); // create offer and set local description\n  pc.onicecandidate = function (ice) { //listen for candidate events\n    if (!ice || !ice.candidate || !ice.candidate.candidate || !ice.candidate.candidate.match(ipRegex)) return;\n    ice.candidate.candidate.match(ipRegex).forEach(ipIterate);\n  };\n}\n\nmodule.exports = {\n  nodeGetIP,\n  clientGetIP\n}","module.exports = __webpack_public_path__ + \"static/media/up-chevron.fc2195aa.svg\";","module.exports = __webpack_public_path__ + \"static/media/down-chevron.61cf0702.svg\";"],"sourceRoot":""}